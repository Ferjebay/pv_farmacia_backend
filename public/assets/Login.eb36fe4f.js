import{_ as y,d as w,r as m,u as v,a as _,P as h,o as P,c as V,e as l,w as S,f as r,g as u,Q as f,h as k,i as d}from"./index.e02e0fd9.js";import{A as g,u as I}from"./Api.e3a65a9d.js";import{u as $}from"./useHelpers.6f57171d.js";import{_ as q}from"./logo.bf3a637f.js";import"./index.2cf0d985.js";const B=w({name:"Login",setup(){const e=m(!1),{mostrarNotify:o}=$(),t=m({email:"",password:""}),i=v();return{form:t,loading:e,isPwd:m(!0),onSubmit:async()=>{try{e.value=!0;const{data:{token:a}}=await g.post("/auth/login",t.value),n=I();n.setToken(a);const{claim:{user:s}}=_.read(a),{data:c}=await g.get(`/roles/getPermisos/${s.rol_id}`);let p=[];c.permisos.forEach(b=>p.push(b.nombre)),n.setPermisos(p),h.hide(),i.push("/"),e.value=!1}catch(a){o("warning",a.response.data.msg,"top"),e.value=!1}},router:i}}}),Q={class:"area-login"},U=l("h1",{class:"title"},"Iniciar Sesion",-1),A={class:"login"},C=l("div",{class:"element-form"},[l("img",{src:q,style:{width:"70%","margin-left":"41px"}})],-1);function L(e,o,t,i,a,n){return P(),V("section",Q,[U,l("div",A,[C,l("form",{onSubmit:o[3]||(o[3]=S((...s)=>e.onSubmit&&e.onSubmit(...s),["prevent"])),class:"element-form"},[r(f,{"label-color":"blue-grey-3",class:"q-mb-lg","bg-color":"blue-grey-10",filled:"",label:"Ingresa tu email",modelValue:e.form.email,"onUpdate:modelValue":o[0]||(o[0]=s=>e.form.email=s),modelModifiers:{trim:!0},required:""},{prepend:u(()=>[r(d,{name:"person",color:"blue-grey-3"})]),_:1},8,["modelValue"]),r(f,{type:e.isPwd?"password":"text","label-color":"blue-grey-3",filled:"","bg-color":"blue-grey-10",label:"Ingresa tu contrase\xF1a",modelValue:e.form.password,"onUpdate:modelValue":o[2]||(o[2]=s=>e.form.password=s),modelModifiers:{trim:!0},required:""},{append:u(()=>[r(d,{name:e.isPwd?"visibility_off":"visibility",color:"blue-grey",class:"cursor-pointer",onClick:o[1]||(o[1]=s=>e.isPwd=!e.isPwd)},null,8,["name"])]),prepend:u(()=>[r(d,{name:"key",color:"blue-grey-3"})]),_:1},8,["type","modelValue"]),r(k,{label:"Ingresar",class:"q-px-xl",loading:e.loading,type:"submit",color:"deep-purple-6"},null,8,["loading"])],32)])])}var T=y(B,[["render",L]]);export{T as default};
