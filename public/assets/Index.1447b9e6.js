import{d as h,r as m,C as E,_ as D,o as i,aa as u,g as d,f as l,aW as Q,e as r,Q as P,h as y,aX as S,ae as k,c as U,ab as V,aT as z,ag as I,aV as N,i as w,ac as B,ad as L}from"./index.e02e0fd9.js";import{Q as T}from"./QSpace.290b7cf2.js";import{Q as j,a as q}from"./QTable.7676999b.js";import{Q as C}from"./QBadge.5c85781b.js";import{Q as R}from"./QPage.b9acbce1.js";import{Q as M}from"./QPageSticky.51a05daf.js";import{A}from"./Api.e3a65a9d.js";import{u as F}from"./useRolPermisos.82749469.js";import{a as H,u as W}from"./useHelpers.6f57171d.js";import{A as X}from"./Add.720564ba.js";import{e as G}from"./QList.ffb79e57.js";import{Q as J}from"./QForm.0c336d83.js";import"./index.2cf0d985.js";const K=h({name:"EditarProveedor",props:["proveedorData"],setup(e,{emit:a}){const{id:p,razon_social:f,direccion:c,tipo_documento:v,numero_documento:s,celular:_,email:o}=e.proveedorData,t=m(!1),g=m({id:p,razon_social:f,tipo_documento:v,numero_documento:s,email:o,celular:_,direccion:c}),n=H(),$=async()=>{try{t.value=!0,await A.put("/proveedores",g.value),a("actualizarLista"),n.notify({color:"positive",message:"Proveedor Editado Exitosamente",icon:"done"}),t.value=!1}catch(b){console.log(b),t.value=!1}};return E(g.value,(b,we)=>{g.value.razon_social=b.razon_social.toUpperCase()}),{formProveedor:g,loading:t,onSubmit:$,options:["Cedula","RUC","Pasaporte"]}}}),O=r("div",{class:"text-h6"},"Editar Proveedor",-1),Y={class:"row q-gutter-sm justify-around"},Z={class:"col-xs-12 col-sm-11"},x=r("label",null,"Razon Social:",-1),ee={class:"col-xs-12 col-sm-5 q-my-md"},oe=r("label",null,"Tipo de Documento:",-1),ae={class:"col-xs-12 col-sm-5 q-my-md"},le=r("label",null,"Numero de Documento:",-1),re={class:"col-xs-12 col-sm-5 q-my-md"},se=r("label",null,"Email:",-1),de={class:"col-xs-12 col-sm-5 q-my-md"},te=r("label",null,"Celular:",-1),ne={class:"col-xs-12 col-sm-11"},ie=r("label",null,"Direcci\xF3n:",-1),me={class:"col-xs-9 col-sm-12 flex justify-center"};function ue(e,a,p,f,c,v){return i(),u(S,{style:{width:"600px","max-width":"80vw"}},{default:d(()=>[l(Q,null,{default:d(()=>[O]),_:1}),l(Q,null,{default:d(()=>[l(J,{onSubmit:e.onSubmit},{default:d(()=>[r("div",Y,[r("div",Z,[x,l(P,{modelValue:e.formProveedor.razon_social,"onUpdate:modelValue":a[0]||(a[0]=s=>e.formProveedor.razon_social=s),dense:"",filled:"",required:""},null,8,["modelValue"])]),r("div",ee,[oe,l(G,{modelValue:e.formProveedor.tipo_documento,"onUpdate:modelValue":a[1]||(a[1]=s=>e.formProveedor.tipo_documento=s),filled:"",options:e.options},null,8,["modelValue","options"])]),r("div",ae,[le,l(P,{modelValue:e.formProveedor.numero_documento,"onUpdate:modelValue":a[2]||(a[2]=s=>e.formProveedor.numero_documento=s),modelModifiers:{trim:!0},type:"number",dense:"",filled:"",required:""},null,8,["modelValue"])]),r("div",re,[se,l(P,{modelValue:e.formProveedor.email,"onUpdate:modelValue":a[3]||(a[3]=s=>e.formProveedor.email=s),modelModifiers:{trim:!0},type:"email",dense:"",filled:"",required:""},null,8,["modelValue"])]),r("div",de,[te,l(P,{modelValue:e.formProveedor.celular,"onUpdate:modelValue":a[4]||(a[4]=s=>e.formProveedor.celular=s),modelModifiers:{trim:!0},type:"number",dense:"",filled:"",required:""},null,8,["modelValue"])]),r("div",ne,[ie,l(P,{modelValue:e.formProveedor.direccion,"onUpdate:modelValue":a[5]||(a[5]=s=>e.formProveedor.direccion=s),dense:"",filled:"",required:""},null,8,["modelValue"])]),r("div",me,[l(y,{loading:e.loading,label:"Editar",class:"q-px-xl",type:"submit",color:"green-9"},null,8,["loading"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var ce=D(K,[["render",ue]]);const ve=[{name:"id",label:"#",align:"left",field:"id",sortable:!0},{name:"razon_social",align:"center",label:"Razon Social",field:"razon_social",sortable:!0},{name:"tipo_documento",align:"center",label:"Tipo de Documento",field:"tipo_documento"},{name:"numero_documento",align:"center",label:"Numero de Documento",field:"numero_documento"},{name:"email",label:"Email",field:"email",align:"center"},{name:"celular",label:"Celular",field:"celular",align:"center"},{name:"estado",label:"Estado",align:"center",field:"estado"},{name:"acciones",label:"acciones",align:"center"}],pe=h({name:"IndexProveedor",components:{Add:X,Editar:ce},setup(){const{validarPermisos:e}=F(),a=m(""),p=m([]),f=m(!1),c=m(!1),v=m(!1),s=m({}),{mostrarNotify:_}=W(),o=async()=>{f.value=!1,c.value=!1,v.value=!0;try{const{data:{proveedores:n}}=await A.get("/proveedores/false");p.value=n}catch(n){console.log(n)}v.value=!1},t=async(n,$)=>{try{await A.delete(`/proveedores/${n}/${$}`),_("positive","Proveedor eliminado exitosamente"),o()}catch(b){console.log(b)}},g=n=>{s.value=n,c.value=!0};return o(),{editarProveedor:g,modalAgregarProveedor:f,modalEditarProveedor:c,activarDesactivarProveedor:t,columns:ve,loading:v,filter:a,getProveedores:o,isPwd:m(!0),rows:p,proveedorData:s,validarPermisos:e}}}),fe=r("div",{class:"col-md-6"},[r("label",{class:"text-h6"},"Listado de Proveedores")],-1),ge={class:"col-md-6 flex justify-end"},Pe={class:"row"},ye={class:"col-md-12 col-xs-12"},_e={class:"q-pa-md"},be={class:"full-width row flex-center text-lime-10 q-gutter-sm"},Ve=r("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1);function $e(e,a,p,f,c,v){const s=k("Add"),_=k("Editar");return i(),U(I,null,[l(R,null,{default:d(()=>[r("div",{class:N(["row q-py-lg q-pl-md",e.$q.screen.xs?"justify-center":"justify-between"])},[fe,r("div",ge,[e.validarPermisos("Agregar Proveedor")&&!e.$q.screen.xs?(i(),u(y,{key:0,color:"secondary","icon-right":"person_add",label:"Agregar Proveedor",class:"q-mr-md",onClick:a[0]||(a[0]=o=>e.modalAgregarProveedor=!e.modalAgregarProveedor)})):V("",!0)])],2),r("div",Pe,[r("div",ye,[r("div",_e,[l(j,{class:"my-sticky-header-table",rows:e.rows,columns:e.columns,filter:e.filter,loading:e.loading,"row-key":"name"},{top:d(()=>[l(T),l(P,{dense:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":a[1]||(a[1]=o=>e.filter=o)},{append:d(()=>[l(w,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-id":d(o=>[l(q,{props:o},{default:d(()=>[B(L(o.pageIndex+1),1)]),_:2},1032,["props"])]),"body-cell-estado":d(o=>[l(q,{props:o},{default:d(()=>[o.value?(i(),u(C,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(i(),u(C,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":d(o=>[l(q,{props:o},{default:d(()=>[e.validarPermisos("Editar Proveedor")?(i(),u(y,{key:0,round:"",color:"primary",onClick:t=>e.editarProveedor(o.row),icon:"edit",class:"q-mr-sm",size:"11px"},null,8,["onClick"])):V("",!0),o.row.estado&&e.validarPermisos("Inactivar Proveedor")?(i(),u(y,{key:1,round:"",color:"deep-orange",icon:"close",onClick:t=>e.activarDesactivarProveedor(o.row.id,!1),size:"11px"},null,8,["onClick"])):V("",!0),!o.row.estado&&e.validarPermisos("Activar Proveedor")?(i(),u(y,{key:2,round:"",color:"positive",icon:"done",onClick:t=>e.activarDesactivarProveedor(o.row.id,!0),size:"11px"},null,8,["onClick"])):V("",!0)]),_:2},1032,["props"])]),"no-data":d(({icon:o,filter:t})=>[r("div",be,[l(w,{size:"2em",name:"sentiment_dissatisfied"}),Ve,l(w,{size:"2em",name:t?"filter_b_and_w":o},null,8,["name"])])]),_:1},8,["rows","columns","filter","loading"])])])])]),_:1}),e.$q.screen.xs&&e.validarPermisos("Agregar Proveedor")?(i(),u(M,{key:0,position:"bottom-right",offset:[18,18]},{default:d(()=>[l(y,{round:"",color:"secondary",size:"lg",icon:"add",onClick:a[2]||(a[2]=o=>e.modalAgregarProveedor=!e.modalAgregarProveedor)})]),_:1})):V("",!0),l(z,{modelValue:e.modalAgregarProveedor,"onUpdate:modelValue":a[3]||(a[3]=o=>e.modalAgregarProveedor=o)},{default:d(()=>[l(s,{onActualizarLista:e.getProveedores},null,8,["onActualizarLista"])]),_:1},8,["modelValue"]),l(z,{modelValue:e.modalEditarProveedor,"onUpdate:modelValue":a[4]||(a[4]=o=>e.modalEditarProveedor=o)},{default:d(()=>[l(_,{proveedorData:e.proveedorData,onActualizarLista:e.getProveedores},null,8,["proveedorData","onActualizarLista"])]),_:1},8,["modelValue"])],64)}var Be=D(pe,[["render",$e]]);export{Be as default};
