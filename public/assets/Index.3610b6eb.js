import{d as P,r as u,C as S,_ as z,o as n,aa as c,g as s,f as o,aW as q,e as t,Q as h,h as v,aX as U,ae as A,c as w,ab as b,aT as E,ag as k,bg as B,aV as j,i as _,ac as G,ad as T}from"./index.e02e0fd9.js";import{Q as F}from"./QSpace.290b7cf2.js";import{Q as M,a as Q}from"./QTable.7676999b.js";import{Q as D}from"./QBadge.5c85781b.js";import{Q as R}from"./QPage.b9acbce1.js";import{Q as H}from"./QPageSticky.51a05daf.js";import{A as $}from"./Api.e3a65a9d.js";import{u as L}from"./useRolPermisos.82749469.js";import{a as O,u as W}from"./useHelpers.6f57171d.js";import{A as X}from"./Add.d7792b6c.js";import{Q as J}from"./QForm.0c336d83.js";import"./QList.ffb79e57.js";import"./index.2cf0d985.js";const K=P({name:"EditarCategoria",props:["categoriaData"],setup(e,{emit:r}){const m=u(!1),{id:C,nombre:g,descripcion:p}=e.categoriaData,i=u({nombre:g,descripcion:p,id:C}),f=O(),a=async()=>{try{m.value=!0;const{data:l}=await $.put("/categorias",i.value);r("getCategorias"),f.notify({color:"positive",message:l.msg,icon:"done"}),m.value=!1}catch(l){console.log(l),m.value=!1}};return S(i.value,(l,V)=>{i.value.nombre=l.nombre.toUpperCase(),i.value.descripcion=l.descripcion.toUpperCase()}),{formCategoria:i,onSubmit:a}}}),Y=t("div",{class:"text-h6"},"Editar Categoria",-1),Z={class:"row q-gutter-sm justify-around"},x={class:"col-xs-12 col-sm-11"},ee=t("label",null,"Nombre:",-1),ae={class:"col-xs-12 col-sm-11"},oe=t("label",null,"Descripci\xF3n:",-1),re={class:"col-xs-9 col-sm-12 flex justify-center"};function se(e,r,m,C,g,p){return n(),c(U,{style:{width:"600px","max-width":"80vw"}},{default:s(()=>[o(q,null,{default:s(()=>[Y]),_:1}),o(q,null,{default:s(()=>[o(J,{onSubmit:e.onSubmit},{default:s(()=>[t("div",Z,[t("div",x,[ee,o(h,{modelValue:e.formCategoria.nombre,"onUpdate:modelValue":r[0]||(r[0]=i=>e.formCategoria.nombre=i),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),t("div",ae,[oe,o(h,{modelValue:e.formCategoria.descripcion,"onUpdate:modelValue":r[1]||(r[1]=i=>e.formCategoria.descripcion=i),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),t("div",re,[o(v,{label:"Editar",class:"q-px-xl",type:"submit",color:"green-9"})])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var te=z(K,[["render",se]]);const ie=[{name:"id",label:"#",align:"left",field:"id",sortable:!0},{name:"nombre",align:"center",label:"Nombre",field:"nombre",sortable:!0},{name:"descripcion",align:"center",label:"Descripci\xF3n",field:"descripcion",sortable:!0},{name:"estado",label:"Estado",align:"center",field:"estado"},{name:"acciones",label:"acciones",align:"center"}],le=P({name:"IndexCategorias",components:{Add:X,Editar:te},setup(){const{validarPermisos:e}=L(),r=u(""),m=u([]),C=u(!1),g=u(!1),p=u(!1),i=u({}),{mostrarNotify:f}=W(),a=async()=>{C.value=!1,g.value=!1,p.value=!0;try{const{data:{categorias:d}}=await $.get("/categorias/false");m.value=d}catch(d){console.log(d)}p.value=!1},l=async(d,y)=>{try{await $.delete(`/categorias/${d}/${y}`),f("positive","Estado cambiado exitosamente"),a()}catch(I){console.log(I)}},V=async d=>{B.create({title:"\xBFDeseas Eliminar esta categoria?",message:"Una vez eliminado no podra recuperarse...!",ok:{push:!0,label:"Eliminar",color:"teal-7"},cancel:{push:!0,color:"blue-grey-8",label:"Cancelar"}}).onOk(async()=>{try{const{data:y}=await $.delete(`/categorias/${d}`);f("positive",y.msg),a()}catch(y){f("negative",y.response.data.message)}})},N=d=>{i.value=d,g.value=!0};return a(),{activarDesactivarCategoria:l,columns:ie,editarPresentacion:N,eliminarCategoria:V,filter:r,getCategorias:a,loading:p,modalAgregarCategoria:C,modalEditarCategoria:g,categoriaData:i,rows:m,validarPermisos:e}}}),ne=t("div",{class:"col-md-6"},[t("label",{class:"text-h6"},"Listado de Categorias")],-1),de={class:"col-md-6 flex justify-end"},ce={class:"row"},me={class:"col-md-12 col-xs-12"},ue={class:"q-pa-md"},ge={class:"full-width row flex-center text-lime-10 q-gutter-sm"},pe=t("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1);function fe(e,r,m,C,g,p){const i=A("Add"),f=A("Editar");return n(),w(k,null,[o(R,null,{default:s(()=>[t("div",{class:j(["row q-py-lg q-pl-md",e.$q.screen.xs?"justify-center":"justify-between"])},[ne,t("div",de,[e.validarPermisos("Agregar Categoria")&&!e.$q.screen.xs?(n(),c(v,{key:0,color:"secondary","icon-right":"add_circle",label:"Nuevo",class:"q-mr-md",onClick:r[0]||(r[0]=a=>e.modalAgregarCategoria=!e.modalAgregarCategoria)})):b("",!0)])],2),t("div",ce,[t("div",me,[t("div",ue,[o(M,{class:"my-sticky-header-table",rows:e.rows,columns:e.columns,filter:e.filter,loading:e.loading,"row-key":"name"},{top:s(()=>[o(F),o(h,{dense:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":r[1]||(r[1]=a=>e.filter=a)},{append:s(()=>[o(_,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-id":s(a=>[o(Q,{props:a},{default:s(()=>[G(T(a.pageIndex+1),1)]),_:2},1032,["props"])]),"body-cell-estado":s(a=>[o(Q,{props:a},{default:s(()=>[a.value?(n(),c(D,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(n(),c(D,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":s(a=>[o(Q,{props:a},{default:s(()=>[e.validarPermisos("Editar Presentacion")?(n(),c(v,{key:0,round:"",color:"primary",onClick:l=>e.editarPresentacion(a.row),icon:"edit",class:"q-mr-sm",size:"11px"},null,8,["onClick"])):b("",!0),a.row.estado?(n(),w(k,{key:1},[a.row.estado&&e.validarPermisos("Inactivar Categoria")?(n(),c(v,{key:0,round:"",color:"deep-orange",icon:"close",onClick:l=>e.activarDesactivarCategoria(a.row.id,!1),size:"11px"},null,8,["onClick"])):b("",!0)],64)):(n(),w(k,{key:2},[!a.row.estado&&e.validarPermisos("Activar Categoria")?(n(),c(v,{key:0,round:"",color:"positive",icon:"done",onClick:l=>e.activarDesactivarCategoria(a.row.id,!0),size:"11px"},null,8,["onClick"])):b("",!0),!a.row.estado&&e.validarPermisos("Eliminar Categoria")?(n(),c(v,{key:1,round:"",color:"deep-orange",class:"q-ml-sm",icon:"delete",onClick:l=>e.eliminarCategoria(a.row.id),size:"11px"},null,8,["onClick"])):b("",!0)],64))]),_:2},1032,["props"])]),"no-data":s(({icon:a,filter:l})=>[t("div",ge,[o(_,{size:"2em",name:"sentiment_dissatisfied"}),pe,o(_,{size:"2em",name:l?"filter_b_and_w":a},null,8,["name"])])]),_:1},8,["rows","columns","filter","loading"])])])])]),_:1}),e.$q.screen.xs&&e.validarPermisos("Agregar Categoria")?(n(),c(H,{key:0,position:"bottom-right",offset:[18,18]},{default:s(()=>[o(v,{round:"",color:"secondary",size:"lg",icon:"add",onClick:r[2]||(r[2]=a=>e.modalAgregarCategoria=!e.modalAgregarCategoria)})]),_:1})):b("",!0),o(E,{modelValue:e.modalAgregarCategoria,"onUpdate:modelValue":r[3]||(r[3]=a=>e.modalAgregarCategoria=a)},{default:s(()=>[o(i,{onGetCategorias:e.getCategorias},null,8,["onGetCategorias"])]),_:1},8,["modelValue"]),o(E,{modelValue:e.modalEditarCategoria,"onUpdate:modelValue":r[4]||(r[4]=a=>e.modalEditarCategoria=a)},{default:s(()=>[o(f,{categoriaData:e.categoriaData,onGetCategorias:e.getCategorias},null,8,["categoriaData","onGetCategorias"])]),_:1},8,["modelValue"])],64)}var Ee=z(le,[["render",fe]]);export{Ee as default};
