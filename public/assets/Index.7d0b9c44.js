import{d as D,r as u,C as I,_ as P,o as n,aa as m,g as t,f as e,aW as A,e as s,Q,h as v,aX as S,ae as V,c as w,ab as y,aT as q,ag as k,bg as U,aV as B,i as _,ac as j,ad as G}from"./index.e02e0fd9.js";import{Q as T}from"./QSpace.290b7cf2.js";import{Q as F,a as C}from"./QTable.7676999b.js";import{Q as E}from"./QBadge.5c85781b.js";import{Q as M}from"./QPage.b9acbce1.js";import{Q as R}from"./QPageSticky.51a05daf.js";import{A as $}from"./Api.e3a65a9d.js";import{u as H}from"./useRolPermisos.82749469.js";import{a as O,u as W}from"./useHelpers.6f57171d.js";import{A as X}from"./Add.02555e45.js";import{Q as J}from"./QForm.0c336d83.js";import"./QList.ffb79e57.js";import"./index.2cf0d985.js";const K=D({name:"EditarPresentacion",props:["laboratorioData"],setup(o,{emit:r}){const c=u(!1),{id:g,nombre:b,abreviatura:f}=o.laboratorioData,l=u({id:g,nombre:b,abreviatura:f}),p=O(),a=async()=>{try{c.value=!0;const{data:i}=await $.put("/laboratorios",l.value);r("getLaboratorios"),p.notify({color:"positive",message:i.msg,icon:"done"}),c.value=!1}catch(i){console.log(i),c.value=!1}};return I(l.value,(i,h)=>{l.value.nombre=i.nombre.toUpperCase(),l.value.abreviatura=i.abreviatura.toUpperCase()}),{formLaboratorio:l,onSubmit:a}}}),Y=s("div",{class:"text-h6"},"Editar Laboratorio",-1),Z={class:"row q-gutter-sm justify-around"},x={class:"col-xs-12 col-sm-11"},oo=s("label",null,"Descripci\xF3n:",-1),ao={class:"col-xs-12 col-sm-11"},eo=s("label",null,"Abreviatura:",-1),ro={class:"col-xs-9 col-sm-12 flex justify-center"};function to(o,r,c,g,b,f){return n(),m(S,{style:{width:"600px","max-width":"80vw"}},{default:t(()=>[e(A,null,{default:t(()=>[Y]),_:1}),e(A,null,{default:t(()=>[e(J,{onSubmit:o.onSubmit},{default:t(()=>[s("div",Z,[s("div",x,[oo,e(Q,{modelValue:o.formLaboratorio.nombre,"onUpdate:modelValue":r[0]||(r[0]=l=>o.formLaboratorio.nombre=l),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),s("div",ao,[eo,e(Q,{modelValue:o.formLaboratorio.abreviatura,"onUpdate:modelValue":r[1]||(r[1]=l=>o.formLaboratorio.abreviatura=l),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),s("div",ro,[e(v,{label:"Editar",class:"q-px-xl",type:"submit",color:"green-9"})])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var so=P(K,[["render",to]]);const lo=[{name:"id",label:"#",align:"left",field:"id",sortable:!0},{name:"Nombre",align:"center",label:"Nombre",field:"nombre",sortable:!0},{name:"Abreviatura",align:"center",label:"Abreviatura",field:"abreviatura",sortable:!0},{name:"estado",label:"Estado",align:"center",field:"estado"},{name:"acciones",label:"acciones",align:"center"}],io=D({name:"IndexPresentaciones",components:{Add:X,Editar:so},setup(){const{validarPermisos:o}=H(),r=u(""),c=u([]),g=u(!1),b=u(!1),f=u(!1),l=u({}),{mostrarNotify:p}=W(),a=async()=>{g.value=!1,b.value=!1,f.value=!0;try{const{data:{laboratorios:d}}=await $.get("/laboratorios/false");c.value=d}catch(d){console.log(d)}f.value=!1},i=async(d,L)=>{try{await $.delete(`/laboratorios/${d}/${L}`),p("positive","Estado cambiado exitosamente"),a()}catch(N){console.log(N)}},h=async d=>{U.create({title:"\xBFDeseas Eliminar este laboratorio?",message:"Una vez eliminado no podra recuperarse...!",ok:{push:!0,label:"Eliminar",color:"teal-7"},cancel:{push:!0,color:"blue-grey-8",label:"Cancelar"}}).onOk(async()=>{try{const{data:L}=await $.delete(`/laboratorios/${d}`);p("positive",L.msg),a()}catch(L){p("negative",L.response.data.message)}})},z=d=>{l.value=d,b.value=!0};return a(),{activarDesactivarLaboratorios:i,columns:lo,editarLaboratorio:z,eliminarPresentacion:h,filter:r,getLaboratorios:a,loading:f,modalAgregarLaboratorio:g,modalEditarLaboratorio:b,laboratorioData:l,rows:c,validarPermisos:o}}}),no=s("div",{class:"col-md-6"},[s("label",{class:"text-h6"},"Listado de Laboratorios")],-1),mo={class:"col-md-6 flex justify-end"},co={class:"row"},uo={class:"col-md-12 col-xs-12"},bo={class:"q-pa-md"},fo={class:"full-width row flex-center text-lime-10 q-gutter-sm"},po=s("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1);function vo(o,r,c,g,b,f){const l=V("Add"),p=V("Editar");return n(),w(k,null,[e(M,null,{default:t(()=>[s("div",{class:B(["row q-py-lg q-pl-md",o.$q.screen.xs?"justify-center":"justify-between"])},[no,s("div",mo,[o.validarPermisos("Agregar Laboratorio")&&!o.$q.screen.xs?(n(),m(v,{key:0,color:"secondary","icon-right":"add_circle",label:"Nuevo",class:"q-mr-md",onClick:r[0]||(r[0]=a=>o.modalAgregarLaboratorio=!o.modalAgregarLaboratorio)})):y("",!0)])],2),s("div",co,[s("div",uo,[s("div",bo,[e(F,{class:"my-sticky-header-table",rows:o.rows,columns:o.columns,filter:o.filter,loading:o.loading,"row-key":"name"},{top:t(()=>[e(T),e(Q,{dense:"",debounce:"300",color:"primary",modelValue:o.filter,"onUpdate:modelValue":r[1]||(r[1]=a=>o.filter=a)},{append:t(()=>[e(_,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-id":t(a=>[e(C,{props:a},{default:t(()=>[j(G(a.pageIndex+1),1)]),_:2},1032,["props"])]),"body-cell-estado":t(a=>[e(C,{props:a},{default:t(()=>[a.value?(n(),m(E,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(n(),m(E,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":t(a=>[e(C,{props:a},{default:t(()=>[o.validarPermisos("Editar Laboratorio")?(n(),m(v,{key:0,round:"",color:"primary",onClick:i=>o.editarLaboratorio(a.row),icon:"edit",class:"q-mr-sm",size:"11px"},null,8,["onClick"])):y("",!0),a.row.estado?(n(),w(k,{key:1},[a.row.estado&&o.validarPermisos("Inactivar Laboratorio")?(n(),m(v,{key:0,round:"",color:"deep-orange",icon:"close",onClick:i=>o.activarDesactivarLaboratorios(a.row.id,!1),size:"11px"},null,8,["onClick"])):y("",!0)],64)):(n(),w(k,{key:2},[!a.row.estado&&o.validarPermisos("Activar Laboratorio")?(n(),m(v,{key:0,round:"",color:"positive",icon:"done",onClick:i=>o.activarDesactivarLaboratorios(a.row.id,!0),size:"11px"},null,8,["onClick"])):y("",!0),!a.row.estado&&o.validarPermisos("Eliminar Laboratorio")?(n(),m(v,{key:1,round:"",color:"deep-orange",class:"q-ml-sm",icon:"delete",onClick:i=>o.eliminarPresentacion(a.row.id),size:"11px"},null,8,["onClick"])):y("",!0)],64))]),_:2},1032,["props"])]),"no-data":t(({icon:a,filter:i})=>[s("div",fo,[e(_,{size:"2em",name:"sentiment_dissatisfied"}),po,e(_,{size:"2em",name:i?"filter_b_and_w":a},null,8,["name"])])]),_:1},8,["rows","columns","filter","loading"])])])])]),_:1}),o.$q.screen.xs&&o.validarPermisos("Agregar Laboratorio")?(n(),m(R,{key:0,position:"bottom-right",offset:[18,18]},{default:t(()=>[e(v,{round:"",color:"secondary",size:"lg",icon:"add",onClick:r[2]||(r[2]=a=>o.modalAgregarLaboratorio=!o.modalAgregarLaboratorio)})]),_:1})):y("",!0),e(q,{modelValue:o.modalAgregarLaboratorio,"onUpdate:modelValue":r[3]||(r[3]=a=>o.modalAgregarLaboratorio=a)},{default:t(()=>[e(l,{onGetLaboratorios:o.getLaboratorios},null,8,["onGetLaboratorios"])]),_:1},8,["modelValue"]),e(q,{modelValue:o.modalEditarLaboratorio,"onUpdate:modelValue":r[4]||(r[4]=a=>o.modalEditarLaboratorio=a)},{default:t(()=>[e(p,{laboratorioData:o.laboratorioData,onGetLaboratorios:o.getLaboratorios},null,8,["laboratorioData","onGetLaboratorios"])]),_:1},8,["modelValue"])],64)}var Eo=P(io,[["render",vo]]);export{Eo as default};
