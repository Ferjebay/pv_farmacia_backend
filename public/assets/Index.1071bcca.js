import{d as q,r as p,C as N,_ as D,o as r,aa as d,g as n,f as o,aW as h,e as t,Q as E,h as v,aX as B,ae as C,c as k,ab as y,aT as A,ag as $,bg as U,aV as j,i as _,ac as G,ad as T}from"./index.e02e0fd9.js";import{Q as F}from"./QSpace.290b7cf2.js";import{Q as R,a as Q}from"./QTable.7676999b.js";import{Q as V}from"./QBadge.5c85781b.js";import{Q as H}from"./QPage.b9acbce1.js";import{Q as L}from"./QPageSticky.51a05daf.js";import{A as w}from"./Api.e3a65a9d.js";import{u as M}from"./useRolPermisos.82749469.js";import{a as O,u as W}from"./useHelpers.6f57171d.js";import{A as X}from"./Add.b6df10bc.js";import{Q as x}from"./QForm.0c336d83.js";import"./QList.ffb79e57.js";import"./index.2cf0d985.js";const J=q({name:"EditarPresentacion",props:["presentacionData"],setup(e,{emit:s}){const c=p(!1),{id:P,nombre:f}=e.presentacionData,l=p({nombre:f,id:P}),m=O(),g=async()=>{try{c.value=!0;const{data:a}=await w.put("/presentaciones",l.value);s("getPresentaciones"),m.notify({color:"positive",message:a.msg,icon:"done"}),c.value=!1}catch(a){console.log(a),c.value=!1}};return N(l.value,(a,u)=>{l.value.nombre=a.nombre.toUpperCase()}),{formPresentacion:l,onSubmit:g}}}),K=t("div",{class:"text-h6"},"Agregar Presentaci\xF3n",-1),Y={class:"row q-gutter-sm justify-around"},Z={class:"col-xs-12 col-sm-11"},ee=t("label",null,"Descripci\xF3n:",-1),ae={class:"col-xs-9 col-sm-12 flex justify-center"};function oe(e,s,c,P,f,l){return r(),d(B,{style:{width:"600px","max-width":"80vw"}},{default:n(()=>[o(h,null,{default:n(()=>[K]),_:1}),o(h,null,{default:n(()=>[o(x,{onSubmit:e.onSubmit},{default:n(()=>[t("div",Y,[t("div",Z,[ee,o(E,{modelValue:e.formPresentacion.nombre,"onUpdate:modelValue":s[0]||(s[0]=m=>e.formPresentacion.nombre=m),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),t("div",ae,[o(v,{label:"Editar",class:"q-px-xl",type:"submit",color:"green-9"})])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var se=D(J,[["render",oe]]);const ne=[{name:"id",label:"#",align:"left",field:"id",sortable:!0},{name:"descripcion",align:"center",label:"Descripci\xF3n",field:"nombre",sortable:!0},{name:"estado",label:"Estado",align:"center",field:"estado"},{name:"acciones",label:"acciones",align:"center"}],te=q({name:"IndexPresentaciones",components:{Add:X,Editar:se},setup(){const{validarPermisos:e}=M(),s=p(""),c=p([]),P=p(!1),f=p(!1),l=p(!1),m=p({}),{mostrarNotify:g}=W(),a=async()=>{P.value=!1,f.value=!1,l.value=!0;try{const{data:{presentaciones:i}}=await w.get("/presentaciones/false");c.value=i}catch(i){console.log(i)}l.value=!1},u=async(i,b)=>{try{await w.delete(`/presentaciones/${i}/${b}`),g("positive","Estado cambiado exitosamente"),a()}catch(S){console.log(S)}},z=async i=>{U.create({title:"\xBFDeseas Eliminar esta presentaci\xF3n?",message:"Una vez eliminado no podra recuperarse...!",ok:{push:!0,label:"Eliminar",color:"teal-7"},cancel:{push:!0,color:"blue-grey-8",label:"Cancelar"}}).onOk(async()=>{try{const{data:b}=await w.delete(`/presentaciones/${i}`);g("positive",b.msg),a()}catch(b){g("negative",b.response.data.message)}})},I=i=>{m.value=i,f.value=!0};return a(),{activarDesactivarPresentaciones:u,columns:ne,editarPresentacion:I,eliminarPresentacion:z,filter:s,getPresentaciones:a,loading:l,modalAgregarPresentacion:P,modalEditarPresentaciones:f,presentacionData:m,rows:c,validarPermisos:e}}}),re=t("div",{class:"col-md-6"},[t("label",{class:"text-h6"},"Listado de Presentaciones")],-1),le={class:"col-md-6 flex justify-end"},ie={class:"row"},de={class:"col-md-12 col-xs-12"},ce={class:"q-pa-md"},me={class:"full-width row flex-center text-lime-10 q-gutter-sm"},ue=t("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1);function pe(e,s,c,P,f,l){const m=C("Add"),g=C("Editar");return r(),k($,null,[o(H,null,{default:n(()=>[t("div",{class:j(["row q-py-lg q-pl-md",e.$q.screen.xs?"justify-center":"justify-between"])},[re,t("div",le,[e.validarPermisos("Agregar Presentacion")&&!e.$q.screen.xs?(r(),d(v,{key:0,color:"secondary","icon-right":"add_circle",label:"Nuevo",class:"q-mr-md",onClick:s[0]||(s[0]=a=>e.modalAgregarPresentacion=!e.modalAgregarPresentacion)})):y("",!0)])],2),t("div",ie,[t("div",de,[t("div",ce,[o(R,{class:"my-sticky-header-table",rows:e.rows,columns:e.columns,filter:e.filter,loading:e.loading,"row-key":"name"},{top:n(()=>[o(F),o(E,{dense:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":s[1]||(s[1]=a=>e.filter=a)},{append:n(()=>[o(_,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-id":n(a=>[o(Q,{props:a},{default:n(()=>[G(T(a.pageIndex+1),1)]),_:2},1032,["props"])]),"body-cell-estado":n(a=>[o(Q,{props:a},{default:n(()=>[a.value?(r(),d(V,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(r(),d(V,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":n(a=>[o(Q,{props:a},{default:n(()=>[e.validarPermisos("Editar Presentacion")?(r(),d(v,{key:0,round:"",color:"primary",onClick:u=>e.editarPresentacion(a.row),icon:"edit",class:"q-mr-sm",size:"11px"},null,8,["onClick"])):y("",!0),a.row.estado?(r(),k($,{key:1},[a.row.estado&&e.validarPermisos("Inactivar Presentacion")?(r(),d(v,{key:0,round:"",color:"deep-orange",icon:"close",onClick:u=>e.activarDesactivarPresentaciones(a.row.id,!1),size:"11px"},null,8,["onClick"])):y("",!0)],64)):(r(),k($,{key:2},[!a.row.estado&&e.validarPermisos("Activar Presentacion")?(r(),d(v,{key:0,round:"",color:"positive",icon:"done",onClick:u=>e.activarDesactivarPresentaciones(a.row.id,!0),size:"11px"},null,8,["onClick"])):y("",!0),!a.row.estado&&e.validarPermisos("Eliminar Presentacion")?(r(),d(v,{key:1,round:"",color:"deep-orange",class:"q-ml-sm",icon:"delete",onClick:u=>e.eliminarPresentacion(a.row.id),size:"11px"},null,8,["onClick"])):y("",!0)],64))]),_:2},1032,["props"])]),"no-data":n(({icon:a,filter:u})=>[t("div",me,[o(_,{size:"2em",name:"sentiment_dissatisfied"}),ue,o(_,{size:"2em",name:u?"filter_b_and_w":a},null,8,["name"])])]),_:1},8,["rows","columns","filter","loading"])])])])]),_:1}),e.$q.screen.xs&&e.validarPermisos("Agregar Presentacion")?(r(),d(L,{key:0,position:"bottom-right",offset:[18,18]},{default:n(()=>[o(v,{round:"",color:"secondary",size:"lg",icon:"add",onClick:s[2]||(s[2]=a=>e.modalAgregarPresentacion=!e.modalAgregarPresentacion)})]),_:1})):y("",!0),o(A,{modelValue:e.modalAgregarPresentacion,"onUpdate:modelValue":s[3]||(s[3]=a=>e.modalAgregarPresentacion=a)},{default:n(()=>[o(m,{onGetPresentaciones:e.getPresentaciones},null,8,["onGetPresentaciones"])]),_:1},8,["modelValue"]),o(A,{modelValue:e.modalEditarPresentaciones,"onUpdate:modelValue":s[4]||(s[4]=a=>e.modalEditarPresentaciones=a)},{default:n(()=>[o(g,{presentacionData:e.presentacionData,onGetPresentaciones:e.getPresentaciones},null,8,["presentacionData","onGetPresentaciones"])]),_:1},8,["modelValue"])],64)}var Ae=D(te,[["render",pe]]);export{Ae as default};
