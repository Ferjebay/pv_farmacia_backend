import{d as q,r as u,C as U,_ as A,o as p,aa as g,g as n,f as a,aW as y,e as s,Q as V,h as b,aX as I,ae as k,c as Q,aT as D,ag as S,bg as L,ab as C,aV as O,i as h,ac as j,ad as M}from"./index.e02e0fd9.js";import{Q as T}from"./QSpace.290b7cf2.js";import{Q as F,a as E}from"./QTable.7676999b.js";import{Q as z}from"./QBadge.5c85781b.js";import{Q as R}from"./QPageSticky.51a05daf.js";import{Q as G}from"./QPage.b9acbce1.js";import{A as P}from"./Api.e3a65a9d.js";import{u as H}from"./useRolPermisos.82749469.js";import{a as N,u as W}from"./useHelpers.6f57171d.js";import{Q as x}from"./QForm.0c336d83.js";import"./QList.ffb79e57.js";import"./index.2cf0d985.js";const X=q({name:"AgregarProveedor",setup(e,{emit:o}){const i=u(!1),r=u({nombre:"",direccion:"",punto_emision:"",secuencia_factura:""}),c=N(),m=async()=>{try{i.value=!0,await P.post("/puntos_ventas",r.value),o("actualizarLista"),c.notify({color:"positive",message:"Punto de Venta Agregado Exitosamente",icon:"done"}),i.value=!1}catch(t){console.log(t),i.value=!1}};return U(r.value,(t,d)=>{r.value.nombre=t.nombre.toUpperCase()}),{formPV:r,loading:i,onSubmit:m}}}),J=s("div",{class:"text-h6"},"Agregar Punto de Venta",-1),K={class:"row q-gutter-sm justify-around"},Y={class:"col-xs-12 col-sm-11"},Z=s("label",null,"Nombre:",-1),ee={class:"col-xs-12 col-sm-11"},oe=s("label",null,"Direcci\xF3n:",-1),ae={class:"col-xs-6 col-sm-5"},le=s("label",null,"Punto de Emisi\xF3n:",-1),se={class:"col-xs-6 col-sm-5"},te=s("label",null,"Secuencia Factura:",-1),ne={class:"col-xs-9 col-sm-12 flex justify-center"};function ie(e,o,i,r,c,m){return p(),g(I,{style:{width:"500px","max-width":"80vw"}},{default:n(()=>[a(y,null,{default:n(()=>[J]),_:1}),a(y,null,{default:n(()=>[a(x,{onSubmit:e.onSubmit},{default:n(()=>[s("div",K,[s("div",Y,[Z,a(V,{modelValue:e.formPV.nombre,"onUpdate:modelValue":o[0]||(o[0]=t=>e.formPV.nombre=t),dense:"",filled:"",required:""},null,8,["modelValue"])]),s("div",ee,[oe,a(V,{modelValue:e.formPV.direccion,"onUpdate:modelValue":o[1]||(o[1]=t=>e.formPV.direccion=t),dense:"",filled:"",required:""},null,8,["modelValue"])]),s("div",ae,[le,a(V,{modelValue:e.formPV.punto_emision,"onUpdate:modelValue":o[2]||(o[2]=t=>e.formPV.punto_emision=t),"input-class":"text-center",dense:"",filled:"",required:""},null,8,["modelValue"])]),s("div",se,[te,a(V,{modelValue:e.formPV.secuencia_factura,"onUpdate:modelValue":o[3]||(o[3]=t=>e.formPV.secuencia_factura=t),modelModifiers:{trim:!0},"input-class":"text-center",dense:"",filled:"",required:""},null,8,["modelValue"])]),s("div",ne,[a(b,{label:"Guardar",class:"q-px-xl",loading:e.loading,type:"submit",color:"green-9"},null,8,["loading"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var re=A(X,[["render",ie]]);const de=q({name:"EditarPV",props:["pvData"],setup(e,{emit:o}){const{id:i,nombre:r,direccion:c,punto_emision:m,secuencia_factura:t}=e.pvData,d=u(!1),l=u({id:i,nombre:r,direccion:c,punto_emision:m,secuencia_factura:t}),v=N(),$=async()=>{try{d.value=!0,await P.put("/puntos_ventas",l.value),o("actualizarLista"),v.notify({color:"positive",message:"Punto de Venta Editado Exitosamente",icon:"done"}),d.value=!1}catch(_){console.log(_),d.value=!1}};return U(l.value,(_,f)=>{l.value.nombre=_.nombre.toUpperCase()}),{formPV:l,loading:d,onSubmit:$}}}),ue=s("div",{class:"text-h6"},"Editar Punto de Venta",-1),ce={class:"row q-gutter-sm justify-around"},me={class:"col-xs-12 col-sm-11"},fe=s("label",null,"Nombre:",-1),pe={class:"col-xs-12 col-sm-11"},ve=s("label",null,"Direcci\xF3n:",-1),Ve={class:"col-xs-6 col-sm-5"},ge=s("label",null,"Punto de Emisi\xF3n:",-1),be={class:"col-xs-6 col-sm-5"},_e=s("label",null,"Secuencia Factura:",-1),Pe={class:"col-xs-9 col-sm-12 flex justify-center"};function ye(e,o,i,r,c,m){return p(),g(I,{style:{width:"500px","max-width":"80vw"}},{default:n(()=>[a(y,null,{default:n(()=>[ue]),_:1}),a(y,null,{default:n(()=>[a(x,{onSubmit:e.onSubmit},{default:n(()=>[s("div",ce,[s("div",me,[fe,a(V,{modelValue:e.formPV.nombre,"onUpdate:modelValue":o[0]||(o[0]=t=>e.formPV.nombre=t),dense:"",filled:"",required:""},null,8,["modelValue"])]),s("div",pe,[ve,a(V,{modelValue:e.formPV.direccion,"onUpdate:modelValue":o[1]||(o[1]=t=>e.formPV.direccion=t),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),s("div",Ve,[ge,a(V,{modelValue:e.formPV.punto_emision,"onUpdate:modelValue":o[2]||(o[2]=t=>e.formPV.punto_emision=t),modelModifiers:{trim:!0},"input-class":"text-center",dense:"",filled:"",required:""},null,8,["modelValue"])]),s("div",be,[_e,a(V,{modelValue:e.formPV.secuencia_factura,"onUpdate:modelValue":o[3]||(o[3]=t=>e.formPV.secuencia_factura=t),modelModifiers:{trim:!0},"input-class":"text-center",dense:"",filled:"",required:""},null,8,["modelValue"])]),s("div",Pe,[a(b,{loading:e.loading,label:"Editar",class:"q-px-xl",type:"submit",color:"green-9"},null,8,["loading"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var $e=A(de,[["render",ye]]);const we=[{name:"id",label:"#",align:"left",field:"id",sortable:!0},{name:"nombre",align:"center",label:"NOMBRE",field:"nombre",sortable:!0},{name:"cod_estb",align:"center",label:"COD. ESTABLECIMIENTO",field:"codigo_establecimiento"},{name:"punto_emision",align:"center",label:"PUNTO DE EMISION",field:"punto_emision"},{name:"secuencia_factura",align:"center",label:"SECUENCIA",field:"secuencia_factura"},{name:"direccion",align:"center",label:"DIRECCION",field:"direccion"},{name:"acciones",label:"ACCIONES",align:"center"}],Ce=q({name:"IndexPV",components:{Add:re,Editar:$e},setup(){const{validarPermisos:e}=H(),o=u(""),i=u([]),r=u(!1),c=u(!1),m=u(!1),t=u({}),{mostrarNotify:d}=W(),l=async()=>{r.value=!1,c.value=!1,m.value=!0;try{const{data:{puntos_ventas:f}}=await P.get("/puntos_ventas/false");i.value=f}catch(f){console.log(f)}m.value=!1},v=async(f,w)=>{try{await P.delete(`/puntos_ventas/${f}/${w}`),d("positive","Punto de Venta actualizado exitosamente"),l()}catch(B){console.log(B)}},$=async f=>{L.create({title:"\xBFDeseas Eliminar este punto de venta?",message:"Una vez eliminado no podra recuperarse...!",ok:{push:!0,label:"Eliminar",color:"teal-7"},cancel:{push:!0,color:"blue-grey-8",label:"Cancelar"}}).onOk(async()=>{try{await P.delete(`/puntos_ventas/${f}`),d("positive","Punto de Venta eliminado exitosamente"),l()}catch(w){d("negative",w.response.data.message)}})},_=f=>{t.value=f,c.value=!0};return l(),{editarProveedor:_,eliminarPV:$,modalAgregarPV:r,modalEditarPV:c,activarDesactivarPV:v,columns:we,loading:m,filter:o,getPV:l,isPwd:u(!0),rows:i,pvData:t,validarPermisos:e}}}),he=s("div",{class:"col-md-6"},[s("label",{class:"text-h6"},"Listado de Puntos de Ventas")],-1),Ee={class:"col-md-6 flex justify-end"},qe={class:"row"},Ae={class:"col-md-12 col-xs-12"},ke={class:"q-pa-md"},Qe={class:"full-width row flex-center text-lime-10 q-gutter-sm"},De=s("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1);function Se(e,o,i,r,c,m){const t=k("Add"),d=k("Editar");return p(),Q(S,null,[a(G,null,{default:n(()=>[s("div",{class:O(["row q-py-lg q-pl-md",e.$q.screen.xs?"justify-center":"justify-between"])},[he,s("div",Ee,[e.validarPermisos("Agregar PV")&&!e.$q.screen.xs?(p(),g(b,{key:0,color:"secondary","icon-right":"add_circle",label:"Agregar Punto de Venta",class:"q-mr-md",onClick:o[0]||(o[0]=l=>e.modalAgregarPV=!e.modalAgregarPV)})):C("",!0)])],2),s("div",qe,[s("div",Ae,[s("div",ke,[a(F,{class:"my-sticky-header-table",rows:e.rows,columns:e.columns,loading:e.loading,filter:e.filter,"row-key":"name"},{top:n(()=>[a(T),a(V,{dense:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":o[1]||(o[1]=l=>e.filter=l)},{append:n(()=>[a(h,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-id":n(l=>[a(E,{props:l},{default:n(()=>[j(M(l.pageIndex+1),1)]),_:2},1032,["props"])]),"body-cell-estado":n(l=>[a(E,{props:l},{default:n(()=>[l.value?(p(),g(z,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(p(),g(z,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":n(l=>[a(E,{props:l},{default:n(()=>[e.validarPermisos("Editar PV")?(p(),g(b,{key:0,round:"",color:"primary",onClick:v=>e.editarProveedor(l.row),icon:"edit",class:"q-mr-sm",size:"11px"},null,8,["onClick"])):C("",!0),l.row.estado?(p(),g(b,{key:1,round:"",color:"blue-grey",icon:"close",onClick:v=>e.activarDesactivarPV(l.row.id,!1),size:"11px"},null,8,["onClick"])):(p(),Q(S,{key:2},[a(b,{round:"",color:"positive",class:"q-mr-sm",icon:"done",onClick:v=>e.activarDesactivarPV(l.row.id,!0),size:"11px"},null,8,["onClick"]),a(b,{round:"",color:"deep-orange",icon:"delete",onClick:v=>e.eliminarPV(l.row.id),size:"11px"},null,8,["onClick"])],64))]),_:2},1032,["props"])]),"no-data":n(({icon:l,filter:v})=>[s("div",Qe,[a(h,{size:"2em",name:"sentiment_dissatisfied"}),De,a(h,{size:"2em",name:v?"filter_b_and_w":l},null,8,["name"])])]),_:1},8,["rows","columns","loading","filter"])])])]),e.$q.screen.xs&&e.validarPermisos("Agregar PV")?(p(),g(R,{key:0,position:"bottom-right",offset:[18,18]},{default:n(()=>[a(b,{round:"",color:"secondary",size:"lg",icon:"add",onClick:o[2]||(o[2]=l=>e.modalAgregarPV=!e.modalAgregarPV)})]),_:1})):C("",!0)]),_:1}),a(D,{modelValue:e.modalAgregarPV,"onUpdate:modelValue":o[3]||(o[3]=l=>e.modalAgregarPV=l)},{default:n(()=>[a(t,{onActualizarLista:e.getPV},null,8,["onActualizarLista"])]),_:1},8,["modelValue"]),a(D,{modelValue:e.modalEditarPV,"onUpdate:modelValue":o[4]||(o[4]=l=>e.modalEditarPV=l)},{default:n(()=>[a(d,{pvData:e.pvData,onActualizarLista:e.getPV},null,8,["pvData","onActualizarLista"])]),_:1},8,["modelValue"])],64)}var Re=A(Ce,[["render",Se]]);export{Re as default};
